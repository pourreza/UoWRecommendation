<workflow xmlns="http://taverna.sf.net/2008/xml/t2flow" version="1" producedBy="taverna-2.1.0"><dataflow id="5974095a-5d97-4091-b23a-2361e453b801" role="top"><name>Workflow13</name><inputPorts><port><name>port</name><depth>0</depth><granularDepth>0</granularDepth><annotations /></port><port><name>model</name><depth>0</depth><granularDepth>0</granularDepth><annotations /></port><port><name>dataset_uri</name><depth>0</depth><granularDepth>0</granularDepth><annotations /></port><port><name>base</name><depth>0</depth><granularDepth>0</granularDepth><annotations /></port><port><name>prefix</name><depth>0</depth><granularDepth>0</granularDepth><annotations /></port><port><name>dataset_service</name><depth>0</depth><granularDepth>0</granularDepth><annotations /></port><port><name>result_dataset</name><depth>0</depth><granularDepth>0</granularDepth><annotations /></port></inputPorts><outputPorts><port><name>result_uri</name><annotations /></port></outputPorts><processors><processor><name>query_server</name><inputPorts><port><name>dataset_uri</name><depth>0</depth></port><port><name>port</name><depth>0</depth></port><port><name>base</name><depth>0</depth></port><port><name>prefix</name><depth>0</depth></port><port><name>model</name><depth>0</depth></port><port><name>result_dataset</name><depth>0</depth></port><port><name>dataset_service</name><depth>0</depth></port></inputPorts><outputPorts><port><name>result</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>beanshell-activity</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.activities.beanshell.BeanshellActivity</class><inputMap><map from="port" to="port" /><map from="model" to="model" /><map from="prefix" to="prefix" /><map from="base" to="base" /><map from="result_dataset" to="result_dataset" /><map from="dataset_service" to="dataset_service" /><map from="dataset_uri" to="dataset_uri" /></inputMap><outputMap><map from="result" to="result" /></outputMap><configBean encoding="xstream"><net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean xmlns="">  <script>// Create POST data stringString postdata = "dataset_uri" + "=" + URLEncoder.encode(dataset_uri, "UTF-8");if(result_dataset !=void &amp;&amp;     result_dataset !=null &amp;&amp;    result_dataset.length()!=0){  postdata += "&amp;result_dataset" + "=" +     URLEncoder.encode(result_dataset, "UTF-8");}if(dataset_service !=void &amp;&amp;     dataset_service !=null &amp;&amp;    dataset_service.length()!=0){  postdata += "&amp;dataset_service" + "=" +     URLEncoder.encode(dataset_service, "UTF-8");}String path = "/"+prefix+"/model/"+ model;URL url = new URL("http://" +base+":"+port+path); URLConnection conn = url.openConnection(); //conn.setRequestProperty("Accept","text/uri-list");conn.setRequestProperty("Content-Type","application/x-www-form-urlencoded");conn.setDoOutput(true); conn.setDoInput(true); OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream()); wr.write(postdata); wr.flush(); // Get the response BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream())); String line; result = "";while ((line = rd.readLine()) != null) {   result+=line;} wr.close(); rd.close(); </script>  <dependencies />  <classLoaderSharing>workflow</classLoaderSharing>  <localDependencies />  <artifactDependencies />  <inputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>port</name>      <depth>0</depth>      <mimeTypes>        <string>text/plain</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>dataset_uri</name>      <depth>0</depth>      <mimeTypes>        <string>text/plain</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>model</name>      <depth>0</depth>      <mimeTypes>        <string>text/plain</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>base</name>      <depth>0</depth>      <mimeTypes>        <string>text/plain</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>prefix</name>      <depth>0</depth>      <mimeTypes>        <string>text/plain</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>result_dataset</name>      <depth>0</depth>      <mimeTypes>        <string>text/plain</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>dataset_service</name>      <depth>0</depth>      <mimeTypes>        <string>text/plain</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>  </inputs>  <outputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>      <granularDepth>0</granularDepth>      <name>result</name>      <depth>0</depth>      <mimeTypes />    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>  </outputs></net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns="">  <maxJobs>1</maxJobs></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns="">  <backoffFactor>1.0</backoffFactor>  <initialDelay>1000</initialDelay>  <maxDelay>5000</maxDelay>  <maxRetries>0</maxRetries></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy><cross><port name="dataset_uri" depth="0" /><port name="port" depth="0" /><port name="base" depth="0" /><port name="prefix" depth="0" /><port name="model" depth="0" /><port name="result_dataset" depth="0" /><port name="dataset_service" depth="0" /></cross></strategy></iteration></iterationStrategyStack></processor></processors><conditions /><datalinks><datalink><sink type="processor"><processor>query_server</processor><port>dataset_uri</port></sink><source type="dataflow"><port>dataset_uri</port></source></datalink><datalink><sink type="processor"><processor>query_server</processor><port>port</port></sink><source type="dataflow"><port>port</port></source></datalink><datalink><sink type="processor"><processor>query_server</processor><port>base</port></sink><source type="dataflow"><port>base</port></source></datalink><datalink><sink type="processor"><processor>query_server</processor><port>prefix</port></sink><source type="dataflow"><port>prefix</port></source></datalink><datalink><sink type="processor"><processor>query_server</processor><port>model</port></sink><source type="dataflow"><port>model</port></source></datalink><datalink><sink type="processor"><processor>query_server</processor><port>result_dataset</port></sink><source type="dataflow"><port>result_dataset</port></source></datalink><datalink><sink type="processor"><processor>query_server</processor><port>dataset_service</port></sink><source type="dataflow"><port>dataset_service</port></source></datalink><datalink><sink type="dataflow"><port>result_uri</port></sink><source type="processor"><processor>query_server</processor><port>result</port></source></datalink></datalinks><annotations /></dataflow></workflow>